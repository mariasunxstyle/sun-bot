import logging
from aiogram import Bot, Dispatcher, executor, types
import os

API_TOKEN = os.getenv("TOKEN")
CHANNEL_USERNAME = "@sunxstyle"

logging.basicConfig(level=logging.INFO)

bot = Bot(token=API_TOKEN)
dp = Dispatcher(bot)

# Ð”Ð°Ð½Ð½Ñ‹Ðµ ÑˆÐ°Ð³Ð¾Ð²
steps = [
    80,  # ÑˆÐ°Ð³ 1 â€” 1Ñ‡ 20Ð¼
    45,  # ÑˆÐ°Ð³ 2 â€” 45Ð¼
    60,  # ÑˆÐ°Ð³ 3 â€” 1Ñ‡
    70,  # ÑˆÐ°Ð³ 4 â€” 1Ñ‡ 10Ð¼
    90,  # ÑˆÐ°Ð³ 5 â€” 1Ñ‡ 30Ð¼
    100, # ÑˆÐ°Ð³ 6 â€” 1Ñ‡ 40Ð¼
    110, # ÑˆÐ°Ð³ 7 â€” 1Ñ‡ 50Ð¼
    120, # ÑˆÐ°Ð³ 8 â€” 2Ñ‡
    130, # ÑˆÐ°Ð³ 9 â€” 2Ñ‡ 10Ð¼
    140, # ÑˆÐ°Ð³ 10 â€” 2Ñ‡ 20Ð¼
    150, # ÑˆÐ°Ð³ 11 â€” 2Ñ‡ 30Ð¼
    150  # ÑˆÐ°Ð³ 12 â€” 2Ñ‡ 30Ð¼
]

def format_duration(minutes):
    hours = minutes // 60
    mins = minutes % 60
    if hours == 0:
        return f"{mins}Ð¼"
    elif mins == 0:
        return f"{hours}Ñ‡"
    else:
        return f"{hours}Ñ‡ {mins}Ð¼"

def generate_step_keyboard():
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
    for i in range(0, 12, 2):
        row = []
        for j in range(2):
            if i + j < len(steps):
                label = f"Ð¨Ð°Ð³ {i+j+1} ({format_duration(steps[i+j])})"
                row.append(types.KeyboardButton(label))
        markup.row(*row)
    markup.add(types.KeyboardButton("â„¹ï¸ Ð˜Ð½Ñ„Ð¾"))
    return markup

INFO_TEXT = """â„¹ï¸ Ð˜Ð½Ñ„Ð¾
ÐœÐµÑ‚Ð¾Ð´ ÑÑƒÐ¿ÐµÑ€ÐºÐ¾Ð¼Ð¿ÐµÐ½ÑÐ°Ñ†Ð¸Ð¸ â€” ÑÑ‚Ð¾ Ð¿Ð¾ÑˆÐ°Ð³Ð¾Ð²Ð°Ñ ÑÑ…ÐµÐ¼Ð° Ð·Ð°Ð³Ð°Ñ€Ð°.
Ð¢Ñ‹ Ð²Ñ‹Ð±Ð¸Ñ€Ð°ÐµÑˆÑŒ ÑˆÐ°Ð³ â€” Ð¸ Ð·Ð°Ð³Ð¾Ñ€Ð°ÐµÑˆÑŒ ÑÑ‚Ñ€Ð¾Ð³Ð¾ Ð¿Ð¾ Ñ‚Ð°Ð¹Ð¼Ð¸Ð½Ð³Ñƒ.

ÐÐ°Ñ‡Ð¸Ð½Ð°Ñ‚ÑŒ Ð²ÑÐµÐ³Ð´Ð° Ð½ÑƒÐ¶Ð½Ð¾ Ñ ÑˆÐ°Ð³Ð° 1, Ð´Ð°Ð¶Ðµ ÐµÑÐ»Ð¸ Ñ‚Ñ‹ ÑƒÐ¶Ðµ Ð½ÐµÐ¼Ð½Ð¾Ð³Ð¾ Ð·Ð°Ð³Ð¾Ñ€ÐµÐ»(Ð°).
ÐšÐ°Ð¶Ð´Ñ‹Ð¹ Ð½Ð¾Ð²Ñ‹Ð¹ Ð´ÐµÐ½ÑŒ Ð¸Ð»Ð¸ Ð¿Ð¾ÑÐ»Ðµ Ð¿ÐµÑ€ÐµÑ€Ñ‹Ð²Ð° â€” Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°Ð¹ÑÑ Ð½Ð° 2 ÑˆÐ°Ð³Ð° Ð½Ð°Ð·Ð°Ð´.

Ð¢Ð°Ðº ÐºÐ¾Ð¶Ð° Ð°Ð´Ð°Ð¿Ñ‚Ð¸Ñ€ÑƒÐµÑ‚ÑÑ Ðº ÑÐ¾Ð»Ð½Ñ†Ñƒ â€” Ð¸ Ñ‚Ñ‹ Ð·Ð°Ð³Ð¾Ñ€Ð°ÐµÑˆÑŒ Ñ€Ð°Ð²Ð½Ð¾Ð¼ÐµÑ€Ð½Ð¾, Ð±ÐµÐ· Ð¾Ð¶Ð¾Ð³Ð¾Ð².
Ð­Ñ‚Ð¾ ÑÐ½Ð¸Ð¶Ð°ÐµÑ‚ Ñ€Ð¸ÑÐº Ð¿ÑÑ‚ÐµÐ½, Ð¿ÐµÑ€ÐµÐ³Ñ€ÐµÐ²Ð° Ð¸ Ð¿Ð¾Ð¼Ð¾Ð³Ð°ÐµÑ‚ Ñ‚ÐµÐ»Ñƒ Ð²ÐºÐ»ÑŽÑ‡Ð°Ñ‚ÑŒ Ð·Ð°Ñ‰Ð¸Ñ‚Ñƒ:
Ð¼ÐµÐ»Ð°Ð½Ð¸Ð½, Ð³Ð¾Ñ€Ð¼Ð¾Ð½Ñ‹ Ð°Ð´Ð°Ð¿Ñ‚Ð°Ñ†Ð¸Ð¸ Ð¸ Ð¸Ð¼Ð¼ÑƒÐ½Ð½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚.

ðŸŒ¤ï¸ Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÐ¼ Ð·Ð°Ð³Ð¾Ñ€Ð°Ñ‚ÑŒ:
Ñ 7:00 Ð´Ð¾ 11:00 Ð¸ Ð¿Ð¾ÑÐ»Ðµ 17:00 â€” Ð² ÑÑ‚Ð¾ Ð²Ñ€ÐµÐ¼Ñ ÑÐ¾Ð»Ð½Ñ†Ðµ Ð¼ÑÐ³ÐºÐ¾Ðµ,
Ð¸ Ð¿Ñ€Ð¸ Ð¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ð²Ð¸Ð¸ Ð¿Ñ€Ð¾Ñ‚Ð¸Ð²Ð¾Ð¿Ð¾ÐºÐ°Ð·Ð°Ð½Ð¸Ð¹ Ð¼Ð¾Ð¶Ð½Ð¾ Ð·Ð°Ð³Ð¾Ñ€Ð°Ñ‚ÑŒ Ð±ÐµÐ· SPF.

â˜€ï¸ Ð¡ 11:00 Ð´Ð¾ 17:00 â€” ÑÐ¾Ð»Ð½Ñ†Ðµ Ð°Ð³Ñ€ÐµÑÑÐ¸Ð²Ð½ÐµÐµ.
Ð•ÑÐ»Ð¸ Ð¾ÑÑ‚Ð°Ñ‘ÑˆÑŒÑÑ Ð½Ð° ÑƒÐ»Ð¸Ñ†Ðµ â€” Ð½Ð°Ð´ÐµÐ²Ð°Ð¹ Ð¾Ð´ÐµÐ¶Ð´Ñƒ, Ð³Ð¾Ð»Ð¾Ð²Ð½Ð¾Ð¹ ÑƒÐ±Ð¾Ñ€ Ð¸Ð»Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹ SPF.

Ð•ÑÐ»Ð¸ ÐµÑÑ‚ÑŒ Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹ â€” Ð¿Ð¸ÑˆÐ¸: @sunxbeach_director"""

WELCOME_TEXT = """ÐŸÑ€Ð¸Ð²ÐµÑ‚, ÑÐ¾Ð»Ð½Ñ†Ðµ! â˜€ï¸
Ð¢Ñ‹ Ð² Ñ‚Ð°Ð¹Ð¼ÐµÑ€Ðµ Ð¿Ð¾ Ð¼ÐµÑ‚Ð¾Ð´Ñƒ ÑÑƒÐ¿ÐµÑ€ÐºÐ¾Ð¼Ð¿ÐµÐ½ÑÐ°Ñ†Ð¸Ð¸.
ÐšÐ¾Ð¶Ð° Ð°Ð´Ð°Ð¿Ñ‚Ð¸Ñ€ÑƒÐµÑ‚ÑÑ Ðº ÑÐ¾Ð»Ð½Ñ†Ñƒ Ð¿Ð¾ÑÑ‚ÐµÐ¿ÐµÐ½Ð½Ð¾ â€” Ð¸ Ð·Ð°Ð³Ð°Ñ€ ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑÑ Ñ€Ð¾Ð²Ð½Ñ‹Ð¼, Ð³Ð»ÑƒÐ±Ð¾ÐºÐ¸Ð¼ Ð¸ Ð±ÐµÐ· Ð¾Ð¶Ð¾Ð³Ð¾Ð².

ÐÐ°Ñ‡Ð¸Ð½Ð°Ð¹ Ñ ÑˆÐ°Ð³Ð° 1. Ð”Ð°Ð¶Ðµ ÐµÑÐ»Ð¸ ÑƒÐ¶Ðµ Ð½ÐµÐ¼Ð½Ð¾Ð³Ð¾ Ð·Ð°Ð³Ð¾Ñ€ÐµÐ»(Ð°), Ð²Ð°Ð¶Ð½Ð¾ Ð¿Ñ€Ð¾Ð¹Ñ‚Ð¸ Ð¿ÑƒÑ‚ÑŒ Ñ Ð½Ð°Ñ‡Ð°Ð»Ð°.
ÐšÐ°Ð¶Ð´Ñ‹Ð¹ Ð½Ð¾Ð²Ñ‹Ð¹ Ð´ÐµÐ½ÑŒ Ð¸ Ð¿Ð¾ÑÐ»Ðµ Ð¿ÐµÑ€ÐµÑ€Ñ‹Ð²Ð° â€” Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°Ð¹ÑÑ Ð½Ð° 2 ÑˆÐ°Ð³Ð° Ð½Ð°Ð·Ð°Ð´.

Ð¥Ð¾Ñ‡ÐµÑˆÑŒ Ñ€Ð°Ð·Ð¾Ð±Ñ€Ð°Ñ‚ÑŒÑÑ Ð¿Ð¾Ð´Ñ€Ð¾Ð±Ð½ÐµÐµ â€” Ð¶Ð¼Ð¸ â„¹ï¸ Ð˜Ð½Ñ„Ð¾. Ð¢Ð°Ð¼ Ð²ÑÑ‘ Ð¿Ð¾ Ð´ÐµÐ»Ñƒ."""

@dp.message_handler(commands=["start"])
async def start(message: types.Message):
    await message.answer(WELCOME_TEXT, reply_markup=generate_step_keyboard())

@dp.message_handler(lambda message: message.text == "â„¹ï¸ Ð˜Ð½Ñ„Ð¾")
async def show_info(message: types.Message):
    await message.answer(INFO_TEXT)

if __name__ == "__main__":
    executor.start_polling(dp, skip_updates=True)
